<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GrocerEaseFinal.DietPlansPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Shell.NavBarIsVisible="False"
    BackgroundColor="#F4F1E8">

    <Grid RowDefinitions="Auto,*">

        <Grid Grid.Row="0"
              Padding="12,8"
              ColumnDefinitions="Auto,*"
              BackgroundColor="#F4F1E8">

            <Border
                WidthRequest="32"
                HeightRequest="32"
                BackgroundColor="#588157"
                StrokeThickness="0"
                Padding="2"
                HorizontalOptions="Start"
                VerticalOptions="Center">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>

                <Label Text="‹"
                       FontSize="22"
                       TextColor="#F4F1E8"
                       HorizontalOptions="Center"
                       VerticalOptions="Center">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBackTapped" />
                    </Label.GestureRecognizers>
                </Label>
            </Border>

            <Label Grid.Column="1"
                   Text="{Binding PageTitle}"
                   FontSize="24"
                   TextColor="#99582A"
                   FontAttributes="Bold"
                   VerticalOptions="Center"
                   HorizontalOptions="Start"
                   Margin="8,0,0,0" />
        </Grid>

        <CollectionView Grid.Row="1"
                        ItemsSource="{Binding Recipes}"
                        SelectionMode="Single"
                        SelectionChanged="OnRecipeSelected"
                        Margin="16">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="8"
                          ColumnDefinitions="140,*,Auto">

                        <Image Source="{Binding ImageUrl}"
                               WidthRequest="120"
                               HeightRequest="120"
                               Aspect="AspectFill">
                            <Image.Clip>
                                <RoundRectangleGeometry CornerRadius="20"
                                                        Rect="0,0,120,120" />
                            </Image.Clip>
                        </Image>

                        <VerticalStackLayout Grid.Column="1" Spacing="2">
                            <Label Text="{Binding Name}"
                                   FontAttributes="Bold"
                                   FontSize="16" />
                            <Label Text="{Binding Category}"
                                   FontSize="12"
                                   Opacity="0.7" />
                        </VerticalStackLayout>

                        <Image Grid.Column="2"
                               Source="chevron_right.png"
                               WidthRequest="20"
                               HeightRequest="20"
                               VerticalOptions="Center" />

                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>